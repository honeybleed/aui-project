!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@aui/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aui/common"],e):e(t.auiComponent={},t.ng.core,t.ng.common,t["@aui/common"])}(this,function(t,e,n,i){"use strict";var a=function(){return function(){}}(),s=function(){function t(t,e){this._el=t,this._ims=e,this._renderIcon()}return Object.defineProperty(t.prototype,"iconObj",{set:function(t){this._iconObj=t,this._renderIcon()},enumerable:!0,configurable:!0}),t.prototype._renderIcon=function(){this._iconObj&&(this._el.nativeElement.innerText=this._ims.getIcon(this._iconObj.family,this._iconObj.name).code,this._el.nativeElement.style.fontFamily=this._iconObj.family)},t}();s.decorators=[{type:e.Directive,args:[{selector:"[auiIcon]"}]}],s.ctorParameters=function(){return[{type:e.ElementRef},{type:i.IconManageService}]},s.propDecorators={iconObj:[{type:e.Input}]};var o=function(){function t(t){this.isDisabled=!1,this.status={};for(var e=0,n=t;e<n.length;e++){var i=n[e];this.status[i]=!1}}return t.prototype.setStatus=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];this.status.hasOwnProperty(i)&&(this.status[i]=!0)}},t.prototype.unsetStatus=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];this.status.hasOwnProperty(i)&&(this.status[i]=!1)}},t.prototype.dumpStatus=function(){var t=[];if(this.isDisabled)return t.push("disable"),t.join(" ");for(var e=0,n=Object.getOwnPropertyNames(this.status);e<n.length;e++){var i=n[e];this.status.hasOwnProperty(i)&&this.status[i]&&t.push(i)}return t.join(" ")},t}(),u=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=function(t){function n(n){var i=t.call(this,["hover","focus","mouse-down","validate-success","validate-error","validating"])||this;return i._cdr=n,i.valueChanged=new e.EventEmitter,i.tailClicked=new e.EventEmitter,i.iconClicked=new e.EventEmitter,i.labelClicked=new e.EventEmitter,i.validated=new e.EventEmitter,i}return u(n,t),Object.defineProperty(n.prototype,"disable",{set:function(t){this.isDisabled=t},enumerable:!0,configurable:!0}),n.prototype.hasIcon=function(){return!!this.icon},n.prototype.hasTail=function(){return!!this.tail},n.prototype.hasLabel=function(){return!!this.label},n.prototype.onInput=function(t){this.value=t.target.value,this.valueChanged.emit(this.value),this.doValidate(!0)},n.prototype.onChange=function(t){this.value=t.target.value,this.valueChanged.emit(this.value),this.doValidate(!1)},n.prototype.doValidate=function(t){var e=this;void 0===t&&(t=!1),!this.isDisabled&&this.validateHelper&&(this.setStatus(["validating"]),this.unsetStatus(["validate-error"]),this.unsetStatus(["validate-success"]),this.validateHelper.doValidate(this.value,t).then(function(t){e.unsetStatus(["validating"]),e.unsetStatus(["validate-error"]),e.setStatus(["validate-success"]),e.validated.emit(t)}).catch(function(t){e.unsetStatus(["validating"]),e.unsetStatus(["validate-success"]),e.setStatus(["validate-error"]),e.validated.emit(t)}))},n.prototype.tailClick=function(){this.isDisabled||this.tailClicked.emit(null)},n.prototype.iconClick=function(){this.isDisabled||this.iconClicked.emit(null)},n.prototype.labelClick=function(){this.isDisabled||this.labelClicked.emit(null)},n.prototype.mouseEnter=function(){this.setStatus(["hover"])},n.prototype.mouseLeave=function(){this.unsetStatus(["hover"])},n.prototype.inputFocus=function(){this.setStatus(["focus"])},n.prototype.inputBlur=function(){this.unsetStatus(["focus"])},n.prototype.focusInput=function(){this.isDisabled||(this._cdr.detectChanges(),this.inputElement.nativeElement.focus())},n.prototype.selectAll=function(){this.isDisabled||(this._cdr.detectChanges(),this.inputElement.nativeElement.select(0,this.value.length))},n.prototype.clearText=function(){this.isDisabled||(this._cdr.detectChanges(),this.value="",this.valueChanged.emit(this.value),this.doValidate())},n.prototype.ngOnInit=function(){this.type||(this.type="text"),this.placeholder||(this.placeholder="placeholder"),this.valueChanged.emit(this.value),this.doValidate()},n}(o);r.decorators=[{type:e.Component,args:[{changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None,selector:"aui-text-input",template:'\n    <div class="aui-text-input-outlet" [ngClass]="dumpStatus()" (mouseenter)="mouseEnter()" (mouseleave)="mouseLeave()">\n      <div class="input-block">\n        <span auiIcon\n              (click)="iconClick()"\n              [iconObj]="icon"\n              *ngIf="hasIcon()"\n              class="icon"></span>\n        <span class="label"\n              *ngIf="hasLabel()"\n              (click)="labelClick() ">{{label}}</span>\n        <input [type]="type"\n               [value]="value"\n               [disabled]="isDisabled"\n               [placeholder]="placeholder"\n               (change)="onChange($event)"\n               (input)="onInput($event)"\n               (focus)="inputFocus()"\n               (blur)="inputBlur()" #input/>\n        <span class="tail"\n              auiIcon [iconObj]="tail"\n              *ngIf="hasTail()"\n              (click)="tailClick()"></span>\n      </div>\n    </div>\n  ',styles:["\n    .aui-text-input-outlet{display:inline-block}\n  "]}]}],r.ctorParameters=function(){return[{type:e.ChangeDetectorRef}]},r.propDecorators={value:[{type:e.Input}],validateHelper:[{type:e.Input}],placeholder:[{type:e.Input}],icon:[{type:e.Input}],tail:[{type:e.Input}],label:[{type:e.Input}],type:[{type:e.Input}],disable:[{type:e.Input}],valueChanged:[{type:e.Output}],tailClicked:[{type:e.Output}],iconClicked:[{type:e.Output}],labelClicked:[{type:e.Output}],validated:[{type:e.Output}],inputElement:[{type:e.ViewChild,args:["input"]}]};var l=function(){return function(){}}();l.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule],declarations:[s,r],exports:[s,r]}]}],l.ctorParameters=function(){return[]};var c=function(){function t(t,e){this.handlers=[],this.successMessage="",this.handlers=this.handlers.concat(t),e&&(this.successMessage=e)}return t.prototype.doValidate=function(t,e){var n={ret:!0,msg:this.successMessage},i=[];if(e)for(var a=0,s=this.handlers;a<s.length;a++){(r=s[a]).validateOnInput&&i.push(r.doValidate(t))}else for(var o=0,u=this.handlers;o<u.length;o++){var r=u[o];i.push(r.doValidate(t))}return new Promise(function(t,e){Promise.all(i).then(function(e){t(n)}).catch(function(t){e(t)})})},t}();t.AuiComponentModule=l,t.IconObj=a,t.IconDirective=s,t.TextInputComponent=r,t.ComponentWithStatus=o,t.ValidateHelper=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=component.umd.min.js.map
